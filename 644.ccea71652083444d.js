"use strict";(self.webpackChunktransport_facility=self.webpackChunktransport_facility||[]).push([[644],{644:(_,a,i)=>{i.r(a),i.d(a,{LoginComponent:()=>h});var c=i(177),r=i(341),d=i(537),g=i(159),e=i(438),u=i(472),m=i(46);function p(s,f){if(1&s&&(e.j41(0,"div",11),e.EFF(1),e.k0s()),2&s){const t=e.XpG();e.AVh("success","success"===t.messageType)("error","error"===t.messageType),e.R7$(),e.SpI(" ",t.message," ")}}let h=(()=>{class s{constructor(t,o,n){this.fb=t,this.authService=o,this.router=n,this.message="",this.messageType="error",this.isLoading=!1}ngOnInit(){this.authService.isAuthenticated()?this.router.navigate(["/home"]):this.initializeForm()}initializeForm(){this.loginForm=this.fb.group({identifier:["",[r.k0.required]],password:["",[r.k0.required,r.k0.minLength(6)]]})}onSubmit(){if(this.loginForm.valid){this.isLoading=!0,this.message="";const o=this.authService.login({identifier:this.loginForm.value.identifier,password:this.loginForm.value.password});this.message=o.message,this.messageType=o.success?"success":"error",this.isLoading=!1,o.success&&setTimeout(()=>{this.router.navigate(["/home"])},500)}else this.markFormGroupTouched(this.loginForm),this.message="Please fill all required fields correctly.",this.messageType="error"}markFormGroupTouched(t){Object.keys(t.controls).forEach(o=>{t.get(o)?.markAsTouched()})}getErrorMessage(t){const o=this.loginForm.get(t);return o?.hasError("required")?`${this.getFieldLabel(t)} is required`:o?.hasError("minlength")?"Password must be at least 6 characters":""}getFieldLabel(t){return{identifier:"Employee ID / Email",password:"Password"}[t]||t}isFieldInvalid(t){const o=this.loginForm.get(t);return!!(o&&o.invalid&&o.touched)}navigateToSignup(){this.router.navigate(["/signup"])}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(r.ok),e.rXU(u.u),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:18,vars:9,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit","formGroup"],["formControlName","identifier","label","Employee ID / Email","type","text","placeholder","Enter your employee ID or email",3,"required","showError","errorMessage"],["formControlName","password","label","Password","type","password","placeholder","Enter your password",3,"required","showError","errorMessage"],["class","message",3,"success","error",4,"ngIf"],[1,"form-actions"],["label","Login","type","primary",3,"clicked","disabled"],[1,"auth-footer"],[1,"link",3,"click"],[1,"message"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e.EFF(4,"Login"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Welcome back! Please login to continue."),e.k0s()(),e.j41(7,"form",3),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.nrm(8,"app-form-input",4)(9,"app-form-input",5),e.DNE(10,p,2,5,"div",6),e.j41(11,"div",7)(12,"app-button",8),e.bIt("clicked",function(){return n.onSubmit()}),e.k0s()(),e.j41(13,"div",9)(14,"p"),e.EFF(15,"Don't have an account? "),e.j41(16,"a",10),e.bIt("click",function(){return n.navigateToSignup()}),e.EFF(17,"Sign Up"),e.k0s()()()()()()),2&o&&(e.R7$(7),e.Y8G("formGroup",n.loginForm),e.R7$(),e.Y8G("required",!0)("showError",n.isFieldInvalid("identifier"))("errorMessage",n.getErrorMessage("identifier")),e.R7$(),e.Y8G("required",!0)("showError",n.isFieldInvalid("password"))("errorMessage",n.getErrorMessage("password")),e.R7$(),e.Y8G("ngIf",n.message),e.R7$(2),e.Y8G("disabled",n.isLoading||n.loginForm.invalid))},dependencies:[c.MD,c.bT,r.X1,r.qT,r.BC,r.cb,r.YS,r.j4,r.JD,d.S,g.Q],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:40px 20px}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;padding:40px;width:100%;max-width:450px}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:8px}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.auth-form[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:30px;margin-bottom:20px}.message[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin-bottom:20px;font-size:14px;text-align:center}.message.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid #e0e0e0}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.link[_ngcontent-%COMP%]{color:#667eea;cursor:pointer;text-decoration:none;font-weight:600;transition:color .3s ease}.link[_ngcontent-%COMP%]:hover{color:#764ba2;text-decoration:underline}@media (max-width: 768px){.auth-card[_ngcontent-%COMP%]{padding:30px 20px}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}}"]})}}return s})()}}]);