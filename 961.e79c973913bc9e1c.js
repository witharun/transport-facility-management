"use strict";(self.webpackChunktransport_facility=self.webpackChunktransport_facility||[]).push([[961],{961:(N,h,l)=>{l.r(h),l.d(h,{HomeComponent:()=>D});var c=l(177),r=l(341),p=function(n){return n.Bike="Bike",n.Car="Car",n}(p||{}),m=l(159),f=l(537),e=l(438),k=l(412);let u=(()=>{class n{constructor(){this.rides=[],this.ridesSubject=new k.t([]),this.rides$=this.ridesSubject.asObservable(),this.loadRidesFromStorage()}loadRidesFromStorage(){const t=localStorage.getItem("rides");if(t){const o=JSON.parse(t).map(i=>({...i,createdAt:new Date(i.createdAt)}));this.rides=this.filterTodayRides(o),this.ridesSubject.next(this.rides)}}saveRidesToStorage(){localStorage.setItem("rides",JSON.stringify(this.rides))}filterTodayRides(t){const o=new Date;return o.setHours(0,0,0,0),t.filter(i=>{const s=new Date(i.createdAt);return s.setHours(0,0,0,0),s.getTime()===o.getTime()})}addRide(t){if(this.rides.some(i=>i.employeeId===t.employeeId))return{success:!1,message:"Employee ID already exists. Each employee can only add one ride per day."};const o={...t,id:this.generateId(),bookedBy:[],createdAt:new Date};return this.rides.push(o),this.ridesSubject.next(this.rides),this.saveRidesToStorage(),{success:!0,message:"Ride added successfully!"}}bookRide(t){const o=this.rides.find(i=>i.id===t.rideId);return o?o.employeeId===t.employeeId?{success:!1,message:"You cannot book your own ride."}:o.bookedBy.includes(t.employeeId)?{success:!1,message:"You have already booked this ride."}:o.vacantSeats<=0?{success:!1,message:"No vacant seats available."}:(o.bookedBy.push(t.employeeId),o.vacantSeats--,this.ridesSubject.next(this.rides),this.saveRidesToStorage(),{success:!0,message:"Ride booked successfully!"}):{success:!1,message:"Ride not found."}}getAvailableRides(t,o){let i=this.rides.filter(d=>d.vacantSeats>0);o&&(i=i.filter(d=>d.vehicleType===o));const s=this.timeToMinutes(t);return i=i.filter(d=>{const v=this.timeToMinutes(d.time);return v>=s&&v-s<=60}),i}getAllRides(){return[...this.rides]}getBookedRidesForUser(t){return this.rides.filter(o=>o.bookedBy.includes(t))}timeToMinutes(t){const[o,i]=t.split(":").map(Number);return 60*o+i}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var g=l(472);function y(n,a){if(1&n&&(e.j41(0,"div",24),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.AVh("success","success"===t.messageType)("error","error"===t.messageType),e.R7$(),e.SpI(" ",t.message," ")}}function _(n,a){if(1&n&&(e.j41(0,"option",25),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function R(n,a){if(1&n&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.getErrorMessage("vehicleType")," ")}}let C=(()=>{class n{constructor(t,o,i,s){this.fb=t,this.rideService=o,this.authService=i,this.cdr=s,this.vehicleTypes=Object.values(p),this.minTime="",this.message="",this.messageType="success"}ngOnInit(){this.setCurrentTime(),this.initializeForm(),this.setEmployeeId(),this.setupTimeValidation()}setCurrentTime(){const t=new Date,o=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");this.minTime=`${o}:${i}`}initializeForm(){this.addRideForm=this.fb.group({employeeId:[{value:"",disabled:!0},[r.k0.required,this.uniqueEmployeeValidator.bind(this)]],vehicleType:["",[r.k0.required]],vehicleNo:["",[r.k0.required]],vacantSeats:["",[r.k0.required,r.k0.min(1)]],time:["",[r.k0.required,this.minTimeValidator.bind(this)]],pickUpPoint:["",[r.k0.required]],destination:["",[r.k0.required]]})}setEmployeeId(){const t=this.authService.getCurrentUser();t?.employeeId&&this.addRideForm.patchValue({employeeId:t.employeeId})}setupTimeValidation(){this.addRideForm.get("time")?.valueChanges.subscribe(t=>{t&&this.timeToMinutes(t)<this.timeToMinutes(this.minTime)&&setTimeout(()=>{this.addRideForm.get("time")?.setValue(this.minTime,{emitEvent:!1}),this.cdr.detectChanges(),this.message="Cannot select a time in the past. Time has to be in the future.",this.messageType="error",setTimeout(()=>{this.message=""},3e3)},0)})}minTimeValidator(t){return t.value&&this.timeToMinutes(t.value)<this.timeToMinutes(this.minTime)?{minTime:{value:t.value}}:null}timeToMinutes(t){const[o,i]=t.split(":").map(Number);return 60*o+i}uniqueEmployeeValidator(t){if(!t.value)return null;const o=this.rideService.getAllRides(),i=t.value;return o.find(d=>d.employeeId===i)?{uniqueEmployee:{value:t.value}}:null}onSubmit(){if(this.addRideForm.valid){const t=this.addRideForm.getRawValue(),o=this.rideService.addRide({employeeId:t.employeeId,vehicleType:t.vehicleType,vehicleNo:t.vehicleNo,vacantSeats:parseInt(t.vacantSeats,10),time:t.time,pickUpPoint:t.pickUpPoint,destination:t.destination});if(this.message=o.message,this.messageType=o.success?"success":"error",o.success){const i=this.addRideForm.get("employeeId")?.value;this.addRideForm.reset(),i&&this.addRideForm.patchValue({employeeId:i}),setTimeout(()=>{this.message=""},3e3)}}else this.markFormGroupTouched(this.addRideForm),this.message="Please fill all required fields correctly.",this.messageType="error"}markFormGroupTouched(t){Object.keys(t.controls).forEach(o=>{t.get(o)?.markAsTouched()})}getErrorMessage(t){const o=this.addRideForm.get(t);return o?.hasError("required")?`${this.getFieldLabel(t)} is required`:o?.hasError("uniqueEmployee")?"Employee ID already exists":o?.hasError("min")?"Vacant seats must be at least 1":o?.hasError("minTime")?"Cannot select a time in the past":""}getFieldLabel(t){return{employeeId:"Employee ID",vehicleType:"Vehicle Type",vehicleNo:"Vehicle No",vacantSeats:"Vacant Seats",time:"Time",pickUpPoint:"Pick-up Point",destination:"Destination"}[t]||t}isFieldInvalid(t){const o=this.addRideForm.get(t);return!!(o&&o.invalid&&o.touched)}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(r.ok),e.rXU(u),e.rXU(g.u),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-ride"]],standalone:!0,features:[e.aNF],decls:30,vars:26,consts:[[1,"container"],[1,"card"],[1,"subtitle"],["class","message",3,"success","error",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"grid","grid-2"],["label","Employee ID","type","text","placeholder","Enter your Employee ID","formControlName","employeeId",3,"required","errorMessage","showError"],[1,"form-group"],["for","vehicleType",1,"form-label"],[1,"required"],[1,"custom-select-wrapper"],["id","vehicleType","formControlName","vehicleType","title","Select Vehicle Type",1,"form-control","custom-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["src","/assets/static/svg/dropdown-chevron.svg","alt","Dropdown icon","title","Dropdown",1,"select-icon"],["class","error-message",4,"ngIf"],["label","Vehicle No","type","text","placeholder","Enter Vehicle Number","formControlName","vehicleNo",3,"required","errorMessage","showError"],["label","Vacant Seats","type","number","placeholder","Number of available seats","formControlName","vacantSeats",3,"required","errorMessage","showError"],["label","Time","type","time","formControlName","time",3,"required","min","errorMessage","showError"],["label","Pick-up Point","type","text","placeholder","Enter pick-up location","formControlName","pickUpPoint",3,"required","errorMessage","showError"],[1,"form-group","full-width"],["label","Destination","type","text","placeholder","Enter destination","formControlName","destination",3,"required","errorMessage","showError"],[1,"form-actions"],["label","Add Ride","type","primary",3,"clicked","disabled"],[1,"message"],[3,"value"],[1,"error-message"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3,"Add New Ride"),e.k0s(),e.j41(4,"p",2),e.EFF(5,"Share your ride with colleagues for today"),e.k0s(),e.DNE(6,y,2,5,"div",3),e.j41(7,"form",4),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.j41(8,"div",5),e.nrm(9,"app-form-input",6),e.j41(10,"div",7)(11,"label",8),e.EFF(12," Vehicle Type "),e.j41(13,"span",9),e.EFF(14,"*"),e.k0s()(),e.j41(15,"div",10)(16,"select",11)(17,"option",12),e.EFF(18,"Select Vehicle Type"),e.k0s(),e.DNE(19,_,2,2,"option",13),e.k0s(),e.nrm(20,"img",14),e.k0s(),e.DNE(21,R,2,1,"div",15),e.k0s(),e.nrm(22,"app-form-input",16)(23,"app-form-input",17)(24,"app-form-input",18)(25,"app-form-input",19),e.j41(26,"div",20),e.nrm(27,"app-form-input",21),e.k0s()(),e.j41(28,"div",22)(29,"app-button",23),e.bIt("clicked",function(){return i.onSubmit()}),e.k0s()()()()()),2&o&&(e.R7$(6),e.Y8G("ngIf",i.message),e.R7$(),e.Y8G("formGroup",i.addRideForm),e.R7$(2),e.Y8G("required",!0)("errorMessage",i.getErrorMessage("employeeId"))("showError",i.isFieldInvalid("employeeId")),e.R7$(7),e.AVh("error",i.isFieldInvalid("vehicleType")),e.R7$(3),e.Y8G("ngForOf",i.vehicleTypes),e.R7$(2),e.Y8G("ngIf",i.isFieldInvalid("vehicleType")),e.R7$(),e.Y8G("required",!0)("errorMessage",i.getErrorMessage("vehicleNo"))("showError",i.isFieldInvalid("vehicleNo")),e.R7$(),e.Y8G("required",!0)("errorMessage",i.getErrorMessage("vacantSeats"))("showError",i.isFieldInvalid("vacantSeats")),e.R7$(),e.Y8G("required",!0)("min",i.minTime)("errorMessage",i.getErrorMessage("time"))("showError",i.isFieldInvalid("time")),e.R7$(),e.Y8G("required",!0)("errorMessage",i.getErrorMessage("pickUpPoint"))("showError",i.isFieldInvalid("pickUpPoint")),e.R7$(2),e.Y8G("required",!0)("errorMessage",i.getErrorMessage("destination"))("showError",i.isFieldInvalid("destination")),e.R7$(2),e.Y8G("disabled",i.addRideForm.invalid))},dependencies:[c.MD,c.Sq,c.bT,r.X1,r.qT,r.xH,r.y7,r.wz,r.BC,r.cb,r.YS,r.j4,r.JD,m.Q,f.S],styles:[".card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;padding:32px;margin-bottom:24px}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:28px}.subtitle[_ngcontent-%COMP%]{color:#666;margin-bottom:24px;font-size:14px}.message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:20px;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.form-actions[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end}.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.custom-select-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%}.custom-select[_ngcontent-%COMP%]{appearance:none;padding-right:40px;background-image:none;cursor:pointer}.select-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);pointer-events:none;color:#667eea;transition:transform .3s ease,color .3s ease;z-index:1}.custom-select-wrapper[_ngcontent-%COMP%]:hover   .select-icon[_ngcontent-%COMP%]{color:#764ba2}.custom-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.custom-select[_ngcontent-%COMP%]:focus + .select-icon[_ngcontent-%COMP%]{color:#764ba2;transform:translateY(-50%) rotate(180deg)}.custom-select.error[_ngcontent-%COMP%] + .select-icon[_ngcontent-%COMP%]{color:#dc3545}"]})}}return n})();function T(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",8)(1,"app-button",9),e.bIt("clicked",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onBookRide())}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("disabled",0===t.ride.vacantSeats)}}let x=(()=>{class n{constructor(){this.showBookButton=!0,this.bookRide=new e.bkB}onBookRide(){this.bookRide.emit(this.ride.id)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-ride-card"]],inputs:{ride:"ride",showBookButton:"showBookButton"},outputs:{bookRide:"bookRide"},standalone:!0,features:[e.aNF],decls:28,vars:13,consts:[[1,"ride-card"],[1,"ride-header"],[1,"badge"],[1,"ride-details"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],["class","ride-footer",4,"ngIf"],[1,"ride-footer"],["label","Book Ride","type","success",3,"clicked","disabled"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h3"),e.EFF(3),e.k0s(),e.j41(4,"span",2),e.EFF(5),e.k0s()(),e.j41(6,"div",3)(7,"div",4)(8,"span",5),e.EFF(9,"Time:"),e.k0s(),e.j41(10,"span",6),e.EFF(11),e.k0s()(),e.j41(12,"div",4)(13,"span",5),e.EFF(14,"Pick-up:"),e.k0s(),e.j41(15,"span",6),e.EFF(16),e.k0s()(),e.j41(17,"div",4)(18,"span",5),e.EFF(19,"Destination:"),e.k0s(),e.j41(20,"span",6),e.EFF(21),e.k0s()(),e.j41(22,"div",4)(23,"span",5),e.EFF(24,"Driver/Employee ID:"),e.k0s(),e.j41(25,"span",6),e.EFF(26),e.k0s()()(),e.DNE(27,T,2,1,"div",7),e.k0s()),2&o&&(e.R7$(3),e.Lme("",i.ride.vehicleType," - ",i.ride.vehicleNo,""),e.R7$(),e.AVh("available",i.ride.vacantSeats>0)("full",0===i.ride.vacantSeats),e.R7$(),e.Lme(" ",i.ride.vacantSeats," ",1===i.ride.vacantSeats?"Seat":"Seats"," Available "),e.R7$(6),e.JRh(i.ride.time),e.R7$(5),e.JRh(i.ride.pickUpPoint),e.R7$(5),e.JRh(i.ride.destination),e.R7$(5),e.JRh(i.ride.employeeId),e.R7$(),e.Y8G("ngIf",i.showBookButton))},dependencies:[c.MD,c.bT,m.Q],styles:[".ride-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;padding:20px;margin-bottom:16px;transition:transform .3s ease,box-shadow .3s ease}.ride-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.ride-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #f0f0f0}.ride-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px}.badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:14px;font-weight:600}.badge.available[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.badge.full[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.ride-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.detail-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}.detail-value[_ngcontent-%COMP%]{font-size:16px;color:#333;font-weight:600}.ride-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:12px;border-top:2px solid #f0f0f0}@media (max-width: 768px){.ride-details[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function F(n,a){if(1&n&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.AVh("success","success"===t.messageType)("error","error"===t.messageType),e.R7$(),e.SpI(" ",t.message," ")}}function M(n,a){if(1&n&&(e.j41(0,"option",24),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function O(n,a){1&n&&(e.j41(0,"div",25)(1,"p"),e.EFF(2,"No rides available matching your criteria."),e.k0s(),e.j41(3,"p",11),e.EFF(4,"Try adjusting the time or vehicle type filter."),e.k0s()())}function P(n,a){if(1&n){const t=e.RV6();e.j41(0,"app-ride-card",28),e.bIt("bookRide",function(i){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onBookRide(i))}),e.k0s()}2&n&&e.Y8G("ride",a.$implicit)("showBookButton",!0)}function E(n,a){if(1&n&&(e.j41(0,"div",26),e.DNE(1,P,1,2,"app-ride-card",27),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.filteredRides)}}let I=(()=>{class n{constructor(t,o,i,s){this.fb=t,this.rideService=o,this.authService=i,this.cdr=s,this.availableRides=[],this.filteredRides=[],this.vehicleTypes=Object.values(p),this.currentTime="",this.minTime="",this.selectedVehicleType="",this.message="",this.messageType="success"}ngOnInit(){this.initializeForm(),this.setEmployeeId(),this.setCurrentTime(),this.loadAvailableRides(),this.subscription=this.rideService.rides$.subscribe(()=>{this.loadAvailableRides()}),this.bookRideForm.get("currentTime")?.valueChanges.subscribe(t=>{t&&(this.timeToMinutes(t)<this.timeToMinutes(this.minTime)?setTimeout(()=>{this.bookRideForm.get("currentTime")?.setValue(this.minTime,{emitEvent:!1}),this.cdr.detectChanges(),this.message="Cannot select a time in the past. Time has to be in the future.",this.messageType="error",setTimeout(()=>{this.message=""},3e3)},0):this.onTimeChange())})}ngOnDestroy(){this.subscription?.unsubscribe()}initializeForm(){this.bookRideForm=this.fb.group({employeeId:[{value:"",disabled:!0},[r.k0.required]],currentTime:["",[this.minTimeValidator.bind(this)]]})}setEmployeeId(){const t=this.authService.getCurrentUser();t?.employeeId&&this.bookRideForm.patchValue({employeeId:t.employeeId})}minTimeValidator(t){return t.value&&this.timeToMinutes(t.value)<this.timeToMinutes(this.minTime)?{minTime:{value:t.value}}:null}timeToMinutes(t){const[o,i]=t.split(":").map(Number);return 60*o+i}setCurrentTime(){const t=new Date,o=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");this.currentTime=`${o}:${i}`,this.minTime=this.currentTime,this.bookRideForm.patchValue({currentTime:this.currentTime})}loadAvailableRides(){const t=this.bookRideForm.get("currentTime")?.value||this.currentTime;this.availableRides=this.rideService.getAvailableRides(t,this.selectedVehicleType||void 0),this.filteredRides=[...this.availableRides]}onTimeChange(){this.loadAvailableRides()}onVehicleTypeFilter(t){this.selectedVehicleType=t.target.value,this.loadAvailableRides()}onBookRide(t){const o=this.bookRideForm.get("employeeId")?.value;if(!o)return this.message="Please enter your Employee ID first.",void(this.messageType="error");const i=this.rideService.bookRide({employeeId:o,rideId:t});this.message=i.message,this.messageType=i.success?"success":"error",i.success&&(this.loadAvailableRides(),setTimeout(()=>{this.message=""},3e3))}isFieldInvalid(t){const o=this.bookRideForm.get(t);return!!(o&&o.invalid&&o.touched)}getErrorMessage(t){return this.bookRideForm.get(t)?.hasError("minTime")?"Cannot select a time in the past":""}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(r.ok),e.rXU(u),e.rXU(g.u),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-book-ride"]],standalone:!0,features:[e.aNF],decls:32,vars:13,consts:[[1,"container"],[1,"card"],[1,"subtitle"],["class","message",3,"success","error",4,"ngIf"],[1,"book-ride-layout"],[1,"left-section"],[3,"formGroup"],[1,"form-inputs"],["label","Your Employee ID","type","text","placeholder","Enter your Employee ID","errorMessage","Employee ID is required","formControlName","employeeId",3,"required","showError"],[1,"form-group"],["label","Current Time","type","time","formControlName","currentTime",3,"required","min","errorMessage","showError"],[1,"help-text"],[1,"filter-section"],["for","vehicleTypeFilter",1,"form-label"],[1,"custom-select-wrapper"],["id","vehicleTypeFilter","title","Filter by Vehicle Type",1,"form-control","custom-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["src","/assets/static/svg/dropdown-chevron.svg","alt","Dropdown icon","title","Dropdown",1,"select-icon"],[1,"right-section"],[1,"rides-section"],["class","no-rides",4,"ngIf"],["class","rides-grid",4,"ngIf"],[1,"message"],[3,"value"],[1,"no-rides"],[1,"rides-grid"],[3,"ride","showBookButton","bookRide",4,"ngFor","ngForOf"],[3,"bookRide","ride","showBookButton"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3,"Book a Ride"),e.k0s(),e.j41(4,"p",2),e.EFF(5,"Find and book available rides for today"),e.k0s(),e.DNE(6,F,2,5,"div",3),e.j41(7,"div",4)(8,"div",5)(9,"form",6)(10,"div",7),e.nrm(11,"app-form-input",8),e.j41(12,"div",9),e.nrm(13,"app-form-input",10),e.j41(14,"small",11),e.EFF(15,"Rides shown from current time up to 60 minutes ahead"),e.k0s()()()(),e.j41(16,"div",12)(17,"div",9)(18,"label",13),e.EFF(19,"Filter by Vehicle Type"),e.k0s(),e.j41(20,"div",14)(21,"select",15),e.bIt("change",function(d){return i.onVehicleTypeFilter(d)}),e.j41(22,"option",16),e.EFF(23,"All Vehicle Types"),e.k0s(),e.DNE(24,M,2,2,"option",17),e.k0s(),e.nrm(25,"img",18),e.k0s()()()(),e.j41(26,"div",19)(27,"div",20)(28,"h3"),e.EFF(29),e.k0s(),e.DNE(30,O,5,0,"div",21)(31,E,2,1,"div",22),e.k0s()()()()()),2&o&&(e.R7$(6),e.Y8G("ngIf",i.message),e.R7$(3),e.Y8G("formGroup",i.bookRideForm),e.R7$(2),e.Y8G("required",!0)("showError",i.isFieldInvalid("employeeId")),e.R7$(2),e.Y8G("required",!1)("min",i.minTime)("errorMessage",i.getErrorMessage("currentTime"))("showError",i.isFieldInvalid("currentTime")),e.R7$(8),e.BMQ("aria-label","Filter by Vehicle Type"),e.R7$(3),e.Y8G("ngForOf",i.vehicleTypes),e.R7$(5),e.SpI("Available Rides (",i.filteredRides.length,")"),e.R7$(),e.Y8G("ngIf",0===i.filteredRides.length),e.R7$(),e.Y8G("ngIf",i.filteredRides.length>0))},dependencies:[c.MD,c.Sq,c.bT,r.X1,r.qT,r.xH,r.y7,r.BC,r.cb,r.YS,r.j4,r.JD,x,f.S],styles:[".card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;padding:32px;margin-bottom:24px}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:28px}.subtitle[_ngcontent-%COMP%]{color:#666;margin-bottom:24px;font-size:14px}.message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:6px;margin-bottom:20px;font-weight:500}.message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.book-ride-layout[_ngcontent-%COMP%]{display:block}.left-section[_ngcontent-%COMP%], .right-section[_ngcontent-%COMP%]{width:100%}.form-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.filter-section[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:2px solid #f0f0f0}.help-text[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-top:4px;display:block}.rides-section[_ngcontent-%COMP%]{margin-top:32px;padding-top:32px;border-top:2px solid #f0f0f0}.rides-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333;font-size:22px}.no-rides[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#666}.no-rides[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.rides-grid[_ngcontent-%COMP%]{display:grid;gap:16px}.custom-select-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%}.custom-select[_ngcontent-%COMP%]{appearance:none;padding-right:40px;background-image:none;cursor:pointer}.select-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);pointer-events:none;color:#667eea;transition:transform .3s ease,color .3s ease;z-index:1}.custom-select-wrapper[_ngcontent-%COMP%]:hover   .select-icon[_ngcontent-%COMP%]{color:#764ba2}.custom-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.custom-select[_ngcontent-%COMP%]:focus + .select-icon[_ngcontent-%COMP%]{color:#764ba2;transform:translateY(-50%) rotate(180deg)}@media (min-width: 1024px){.book-ride-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,1fr);gap:0;align-items:start}.left-section[_ngcontent-%COMP%]{grid-column:1 / 8;width:100%}.right-section[_ngcontent-%COMP%]{grid-column:9 / 13;width:100%;display:flex;flex-direction:column;height:100%}.left-section[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:2px solid #f0f0f0}.right-section[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{margin-top:0;padding-top:0;border-top:none;margin-bottom:20px}.rides-section[_ngcontent-%COMP%]{margin-top:0;padding-top:0;border-top:none;flex:1;display:flex;flex-direction:column;overflow:hidden;max-height:calc(100vh - 300px)}.rides-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;flex-shrink:0}.rides-grid[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-right:8px;grid-template-columns:1fr}.rides-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.rides-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.rides-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#667eea;border-radius:4px}.rides-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#764ba2}}@media (min-width: 768px) and (max-width: 1023px){.rides-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})}}return n})();var w=l(46);function S(n,a){if(1&n&&(e.j41(0,"div",21)(1,"div",22)(2,"strong"),e.EFF(3),e.k0s(),e.EFF(4," \u2192 "),e.j41(5,"strong"),e.EFF(6),e.k0s()(),e.j41(7,"div",22)(8,"span"),e.EFF(9),e.k0s(),e.EFF(10," \u2022 "),e.j41(11,"span"),e.EFF(12),e.k0s(),e.EFF(13," \u2022 "),e.j41(14,"span"),e.EFF(15),e.k0s()()()),2&n){const t=a.$implicit;e.R7$(3),e.JRh(t.pickUpPoint),e.R7$(3),e.JRh(t.destination),e.R7$(3),e.JRh(t.time),e.R7$(3),e.JRh(t.vehicleType),e.R7$(3),e.JRh(t.vehicleNo)}}function j(n,a){if(1&n&&(e.j41(0,"div",15)(1,"div",16)(2,"span",17),e.EFF(3,"\u{1f697}"),e.k0s(),e.j41(4,"span",18),e.EFF(5),e.k0s()(),e.j41(6,"div",19),e.DNE(7,S,16,5,"div",20),e.k0s()()),2&n){const t=e.XpG();e.R7$(5),e.SpI("Booked Ride",t.bookedRides.length>1?"s":"",""),e.R7$(2),e.Y8G("ngForOf",t.bookedRides)}}function $(n,a){1&n&&e.nrm(0,"app-add-ride")}function B(n,a){1&n&&e.nrm(0,"app-book-ride")}let D=(()=>{class n{constructor(t,o,i){this.authService=t,this.rideService=o,this.router=i,this.title="Transport Facility Management",this.description="Schedule and book rides with your colleagues",this.activeTab="add",this.bookedRides=[]}ngOnInit(){this.updateBookedRides(),this.subscription=this.rideService.rides$.subscribe(()=>{this.updateBookedRides()})}ngOnDestroy(){this.subscription?.unsubscribe()}updateBookedRides(){const t=this.authService.getCurrentUser();this.bookedRides=t?.employeeId?this.rideService.getBookedRidesForUser(t.employeeId):[]}setActiveTab(t){this.activeTab=t}logout(){this.authService.logout(),this.router.navigate(["/login"])}getCurrentUser(){return this.authService.getCurrentUser()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(g.u),e.rXU(u),e.rXU(w.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-home"]],standalone:!0,features:[e.aNF],decls:22,vars:11,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],[1,"tagline"],[1,"user-info"],[1,"user-details"],[1,"user-name"],[1,"user-email"],["class","booked-rides-info",4,"ngIf"],["label","Logout","type","ghost","size","small",3,"clicked"],[1,"tab-navigation"],["label","Add Ride","variant","tab",3,"clicked","active","icon"],["label","Book Ride","variant","tab",3,"clicked","active","icon"],[1,"app-content"],[4,"ngIf"],[1,"booked-rides-info"],[1,"booked-ride-badge"],[1,"badge-icon"],[1,"badge-text"],[1,"booked-rides-details"],["class","booked-ride-item",4,"ngFor","ngForOf"],[1,"booked-ride-item"],[1,"ride-info-line"]],template:function(o,i){if(1&o&&(e.j41(0,"div",0)(1,"header",1)(2,"div",2)(3,"div")(4,"h1"),e.EFF(5),e.k0s(),e.j41(6,"p",3),e.EFF(7),e.k0s()(),e.j41(8,"div",4)(9,"div",5)(10,"span",6),e.EFF(11),e.k0s(),e.j41(12,"span",7),e.EFF(13),e.k0s()(),e.DNE(14,j,8,2,"div",8),e.j41(15,"app-button",9),e.bIt("clicked",function(){return i.logout()}),e.k0s()()()(),e.j41(16,"nav",10)(17,"app-button",11),e.bIt("clicked",function(){return i.setActiveTab("add")}),e.k0s(),e.j41(18,"app-button",12),e.bIt("clicked",function(){return i.setActiveTab("book")}),e.k0s()(),e.j41(19,"main",13),e.DNE(20,$,1,0,"app-add-ride",14)(21,B,1,0,"app-book-ride",14),e.k0s()()),2&o){let s,d;e.R7$(5),e.JRh(i.title),e.R7$(2),e.JRh(i.description),e.R7$(4),e.JRh(null==(s=i.getCurrentUser())?null:s.employeeId),e.R7$(2),e.JRh(null==(d=i.getCurrentUser())?null:d.email),e.R7$(),e.Y8G("ngIf",i.bookedRides.length>0),e.R7$(3),e.Y8G("active","add"===i.activeTab)("icon","OfferRide"),e.R7$(),e.Y8G("active","book"===i.activeTab)("icon","bookRide"),e.R7$(2),e.Y8G("ngIf","add"===i.activeTab),e.R7$(),e.Y8G("ngIf","book"===i.activeTab)}},dependencies:[c.MD,c.Sq,c.bT,C,I,m.Q],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh}.app-header[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#50e6be,#00302a);padding:40px 20px}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px;background:#ffffff1a;backdrop-filter:blur(10px);padding:24px 32px;border-radius:12px;box-shadow:0 4px 6px #0000001a}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px;margin:0 0 10px;text-shadow:2px 2px 4px rgba(0,0,0,.2)}.tagline[_ngcontent-%COMP%]{font-size:18px;opacity:.9;margin:0}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.booked-rides-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px 16px;background:#ffffff26;border-radius:8px;border:1px solid rgba(255,255,255,.2);min-width:200px}.booked-ride-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600;font-size:14px}.badge-icon[_ngcontent-%COMP%]{font-size:18px}.badge-text[_ngcontent-%COMP%]{color:#fff}.booked-rides-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;font-size:12px}.booked-ride-item[_ngcontent-%COMP%]{padding-top:8px;border-top:1px solid rgba(255,255,255,.2)}.booked-ride-item[_ngcontent-%COMP%]:first-child{border-top:none;padding-top:0}.ride-info-line[_ngcontent-%COMP%]{margin:2px 0;color:#fffffff2}.ride-info-line[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff;font-weight:600}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:4px;padding-right:16px;border-right:1px solid rgba(255,255,255,.2)}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.user-email[_ngcontent-%COMP%]{font-size:14px;opacity:.9}.tab-navigation[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:0;margin-bottom:30px;padding:20px 20px 0;border-bottom:1px solid #c6c6c6;position:sticky;top:0;z-index:100;background:#f2f2f2;box-shadow:0 2px 4px #0000001a}.app-content[_ngcontent-%COMP%]{padding:0 20px}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:20px}.user-info[_ngcontent-%COMP%]{width:100%;justify-content:center}.user-details[_ngcontent-%COMP%]{align-items:center;padding-right:0;border-right:none;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:12px;margin-bottom:12px}.booked-rides-info[_ngcontent-%COMP%]{width:100%;min-width:auto}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.tagline[_ngcontent-%COMP%]{font-size:14px}}"]})}}return n})()}}]);